<script src="https://alcdn.msauth.net/lib/1.2.1/js/msal.js"></script>

<script>
  var msalConfig = {
    auth: {
      clientId: '72b94666-c0f8-451b-a060-e48ab230c13c',
      authority: 'https://login.microsoftonline.com/8e81e7c5-f030-4a29-85be-a64c83c892b6',
      redirectURI: 'http://localhost:4000/recipes/'
    },
    cache: {
      cacheLocation: 'localStorage',
      storeAuthStateInCookie: true
    }
  };

  var myMSALObj = new Msal.UserAgentApplication(msalConfig);

  var requestObj = {
    scopes: ['user.read']
  };

  if (!sessionStorage.getItem('recipes.user')) {
    const userName = myMSALObj.getAccount().name;
    console.log(myMSALObj.getAccount());
    alert("User '" + userName + "' logged-in");
    myMSALObj.handle;
  }

  document.getElementById('test').textContent = sessionStorage.getItem('recipes.user');

  //   let token = window.location.hash.substr(1);
  //   sessionStorage.setItem('token', token);
  //   window.location.replace('/');
</script>

<p id="test"></p>
<!-- http://localhost:4000/recipes/auth_callback.html#id_token=
    
    eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Ilg1ZVhrNHh5b2pORnVtMWtsMll0djhkbE5QNC1jNTdkTzZRR1RWQndhTmsifQ.
    eyJleHAiOjE1ODA4Njc2MTYsIm5iZiI6MTU4MDg2NDAxNiwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9uaWNob2xhc2Zpc2guYjJjbG9naW4uY29tL2UwMWJjYmE3LWMxZmYtNDliOC04ZjNhLTFkZTE5YzI3Y2UwMy92Mi4wLyIsInN1YiI6ImFkNjc1MzNmLTA0ZTctNDRhYy1iYWJlLWZjZTk3YWY5ZmQ2NiIsImF1ZCI6ImI0NzgzZjEwLWU1ODYtNDY5YS1hMTNlLTBiOTlmMzNiOTFhYSIsIm5vbmNlIjoiZGVmYXVsdE5vbmNlIiwiaWF0IjoxNTgwODY0MDE2LCJhdXRoX3RpbWUiOjE1ODA4NjQwMTYsImVtYWlscyI6WyJ0aGVuaWNrZmlzaEBwcm90b25tYWlsLmNvbSJdLCJnaXZlbl9uYW1lIjoiTmljayIsImZhbWlseV9uYW1lIjoiRmlzaCIsInRmcCI6IkIyQ18xX3JlY2lwZV9zaWduaW4ifQ
.EjMwReOpOo5f8a0uqTH3KP8JLJIPq_S8Ul7nNY2P-GFjUkoVlGvJoounViWElu3TK5XQ-KfN_P41E2yY2h38ItVnhRcEiNUoe9_Ob1UOArDg0Zqe2rHLt10s7-aEjQGiTMTD6HRH1jJw2LzFf3-UXmog5H75V59myvclBN--3ZKKB6OgeTzQckV41Do5Z25-prSrLAvaMOEnxuGxIriyg4xAmMlj1-RfXCjTAQKxXjF4ly1pwX8i0LLzmhgeQhkvFvN5ywympk7sp-M3eZtY2p6R67fFAbOl_fq1KDDGWjXw7DGvqCQ04X0nwFx7FpRks7yKorTpsM0FXMgpJeKq2A -->
